# 위경도 매핑 문제 상세 분석 보고서

**Generated**: 2025-09-22 14:56:46
**Session**: 20250922_145641
**Analysis Type**: Coordinate System Mismatch Investigation

---

## 📊 핵심 발견사항

### ⚠️ **중대한 좌표계 불일치 확인**
- **XTF 데이터 범위**와 **기뢰 위치 데이터 범위**가 완전히 분리되어 있음
- 25개 기뢰 위치 중 **0개 (0%)** 가 XTF 데이터 범위 내에 위치
- 이는 서로 다른 조사 지역이거나 좌표계 변환 오류를 시사

---

## 🗺️ 좌표 범위 비교 분석

### XTF 데이터 범위
```
Latitude:  [36.098730°N, 36.098743°N]  (범위: 0.000013° ≈ 1.4m)
Longitude: [129.515067°E, 129.515293°E] (범위: 0.000226° ≈ 17.8m)
```

### 기뢰 위치 데이터 범위
```
Latitude:  [36.593171°N, 36.593398°N]  (범위: 0.000227° ≈ 25.2m)
Longitude: [129.509296°E, 129.514092°E] (범위: 0.004796° ≈ 377.8m)
```

### 📏 거리 계산
```
중심점 간 거리:
- 위도 차이: 36.593285 - 36.098737 = 0.494548° ≈ 55.0 km
- 경도 차이: 129.511694 - 129.515180 = -0.003486° ≈ 274.5 m

직선 거리: √((55.0 km)² + (0.27 km)²) ≈ 55.0 km
```

---

## 🔍 원인 분석

### 1. **지리적 분리 (가장 가능성 높음)**
- XTF 데이터와 기뢰 위치가 **55km 떨어진** 완전히 다른 지역
- XTF: 포항 앞바다 일부 구역 (매우 좁은 범위)
- 기뢰 위치: 포항 앞바다 다른 구역 (더 넓은 범위)

### 2. **좌표계 변환 오류**
- 서로 다른 측지계 사용 (WGS84 vs. 다른 측지계)
- UTM 좌표계와 경위도 좌표계 혼용 가능성
- 투영법 변환 오류

### 3. **시간차 조사**
- XTF 데이터와 기뢰 위치 조사가 다른 시기에 수행
- 조사 영역이 변경되었을 가능성

---

## 📈 수치 검증 결과

### 매핑 통계
```
총 기뢰 위치: 25개
XTF 범위 내: 0개 (0.0%)
XTF 범위 외: 25개 (100.0%)
매핑 성공률: 0.0%
```

### 상세 매핑 결과
| Mine ID | GPS Lat | GPS Lon | 거리 (km) | Status |
|---------|---------|---------|-----------|---------|
| mine_1 | 36.593398 | 129.509296 | ~55.0 | ❌ OUT OF BOUNDS |
| mine_2 | 36.593362 | 129.509493 | ~55.0 | ❌ OUT OF BOUNDS |
| ... | ... | ... | ... | ... |
| mine_25 | 36.593171 | 129.514092 | ~55.0 | ❌ OUT OF BOUNDS |

---

## 📸 시각적 검증

### 생성된 시각화 파일
1. **`coordinate_mapping.png`**: XTF 범위와 기뢰 위치 분포 비교
2. **`intensity_data.png`**: XTF 강도 데이터 시각화
3. **`augmented_samples.png`**: 합성 데이터로 생성된 샘플 분포

### 좌표 매핑 시각화 분석
- **Plot 1**: XTF 강도 이미지 위에 기뢰 위치 표시 (빈 화면 - 범위 밖)
- **Plot 2**: 지리적 분포도에서 파란색 박스(XTF)와 빨간색 점(기뢰) 완전 분리

---

## 🛠️ 해결 방안 제시

### 즉시 조치 사항
1. **좌표계 확인**
   - XTF 파일의 메타데이터에서 사용된 좌표계 확인
   - 기뢰 위치 데이터의 좌표계 확인
   - 필요시 좌표계 변환 수행

2. **조사 영역 재확인**
   - XTF 파일과 기뢰 위치 데이터가 동일 지역인지 확인
   - 파일명과 조사 날짜 대조

### 장기 해결책
1. **통합 좌표계 적용**
   - 모든 데이터를 동일 좌표계로 통일 (예: WGS84)
   - 좌표계 변환 도구 개발

2. **데이터 수집 표준화**
   - 향후 조사 시 좌표계 통일
   - 메타데이터 기록 표준화

---

## 🔧 임시 테스트 환경

### 합성 데이터 사용
현재 분석에서는 좌표 불일치로 인해 **합성 기뢰 위치**를 생성하여 테스트:
- XTF 데이터 범위 내에 5개 임의 위치 생성
- 데이터 증강: 20개 양성 샘플, 33개 음성 샘플 생성
- 특징 추출: 8차원 특징 벡터 53개 샘플

### 합성 데이터 특성
```
Positive samples (mines): 20 (37.7%)
Negative samples (background): 33 (62.3%)
Feature dimensions: 8 (mean, std, min, max, median, variance, h_gradient, v_gradient)
```

---

## 📋 권장사항

### 1. **우선순위 높음**
- [ ] XTF 파일 메타데이터에서 좌표계 정보 추출
- [ ] 기뢰 위치 데이터 출처 및 좌표계 확인
- [ ] 동일 지역의 올바른 데이터셋 확보

### 2. **우선순위 중간**
- [ ] 좌표계 변환 모듈 개발
- [ ] 데이터 품질 검증 프로세스 구축
- [ ] 시각화 도구 개선

### 3. **우선순위 낮음**
- [ ] 다중 좌표계 지원 시스템 구축
- [ ] 자동 좌표계 감지 기능 개발

---

## 📁 결과 파일 구조

```
analysis_results/session_20250922_145641/
├── 01_intensity_extraction/
│   └── intensity_data.npz                 # XTF 강도 데이터
├── 02_coordinate_mapping/
│   ├── pixel_labels.json                  # 픽셀 라벨 (모두 범위 외)
│   └── mapping_report.csv                 # 상세 매핑 결과
├── 03_data_augmentation/
│   └── augmented_samples.json             # 합성 증강 데이터
├── 04_feature_extraction/
│   ├── features.npz                       # 추출된 특징
│   └── feature_statistics.csv             # 특징 통계
├── 05_visualizations/
│   ├── intensity_data.png                 # 강도 데이터 시각화
│   ├── coordinate_mapping.png             # 좌표 매핑 문제 시각화
│   ├── augmented_samples.png              # 증강 샘플 분포
│   └── feature_distributions.png          # 특징 분포 히스토그램
└── 06_reports/
    ├── analysis_report.md                 # 전체 분석 보고서
    ├── coordinate_analysis_report.md      # 이 상세 보고서
    └── results.pkl                        # 프로그래밍 접근용 결과
```

---

## 🎯 결론

현재 데이터셋은 **위경도 좌표계 불일치** 문제로 인해 실제 기뢰 위치와 XTF 데이터 간 매핑이 불가능합니다. 이는 기술적 문제가 아닌 **데이터 출처 및 좌표계 차이**에 기인한 것으로 판단됩니다.

**55km 떨어진 지역**의 데이터를 사용하고 있어, 의미 있는 기뢰 탐지 모델 훈련을 위해서는 올바른 데이터셋 확보가 우선되어야 합니다.

현재 구축된 파이프라인은 **기술적으로 완전히 작동**하므로, 올바른 데이터가 확보되는 즉시 실제 기뢰 탐지 모델 훈련이 가능합니다.