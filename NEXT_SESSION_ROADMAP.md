# Next Session Roadmap - Step 5: 분류 모델 완성 및 실데이터/모의데이터 분석

## 세션 목표
**Step 5 완성**: 기뢰 분류 모델 구현, 훈련, 평가 및 실데이터/모의데이터 비교 분석

## 사전 준비 완료 상태

### ✅ 데이터 준비 완료
- **XTF 추출**: 3개 파일, 각 200 ping 데이터
- **GPS 라벨링**: 25개 포항 기뢰 위치 (모두 XTF 영역 내)
- **데이터 증강**: 25 → 275 샘플 (11배 증가)
- **특징 추출**: 다중 기법 (HOG, LBP, Gabor, SFS, 통계) 적용

### ✅ 파이프라인 검증 완료
- Steps 1-4 모든 모듈 정상 작동 확인
- GPS-픽셀 매핑 시스템 검증 완료
- 시각화 도구 준비 (영문 차트)

## Step 5 구현 계획

### 5.1 분류 모델 아키텍처 설계
**목표**: 최적의 기뢰 분류 알고리즘 선택 및 구현

**주요 작업**:
1. **모델 후보 평가**
   - Traditional ML: SVM, Random Forest, XGBoost
   - Deep Learning: CNN, ResNet, EfficientNet
   - 앙상블 방법

2. **베이스라인 구현**
   - 간단한 분류기로 성능 기준점 설정
   - 특징 중요도 분석

3. **모델 선택 기준**
   - 정확도 (Accuracy)
   - 정밀도/재현율 (Precision/Recall)
   - F1-Score
   - 추론 속도 (실시간 처리 고려)

### 5.2 데이터셋 분할 및 검증 전략
**목표**: Robust한 모델 평가 시스템 구축

**주요 작업**:
1. **데이터 분할**
   - 훈련/검증/테스트: 70%/15%/15%
   - Stratified split (클래스 균형 유지)
   - 공간적 분할 (지리적 편향 방지)

2. **교차 검증**
   - K-Fold Cross Validation (k=5)
   - 시간적 분할 (temporal split) 고려

3. **데이터 리키지 방지**
   - 증강 데이터 분할 시 원본 유지
   - 테스트 셋 격리

### 5.3 모델 훈련 및 최적화
**목표**: 최고 성능의 분류 모델 구현

**주요 작업**:
1. **하이퍼파라미터 튜닝**
   - Grid Search / Random Search
   - Bayesian Optimization
   - 주요 파라미터: learning rate, batch size, regularization

2. **특징 선택 및 공학**
   - 특징 중요도 분석
   - PCA/t-SNE 차원 축소
   - 특징 조합 최적화

3. **모델 앙상블**
   - 다중 모델 조합
   - Voting / Stacking 전략

### 5.4 성능 평가 및 분석
**목표**: 종합적인 모델 성능 평가

**주요 작업**:
1. **정량적 평가**
   - Confusion Matrix
   - ROC/AUC 곡선
   - Precision-Recall 곡선
   - 클래스별 성능 분석

2. **정성적 분석**
   - 오분류 케이스 분석
   - 특징 기여도 시각화
   - 모델 해석가능성

3. **실시간 성능**
   - 추론 속도 측정
   - 메모리 사용량 분석

## 실데이터/모의데이터 비교 분석

### 데이터셋 구성
**실데이터**: 포항 XTF + GPS 좌표 (25개 기뢰)
**모의데이터**: 기존 합성 데이터셋

### 비교 분석 항목

#### 6.1 데이터 분포 특성 비교
1. **통계적 특성**
   - 강도 분포 비교
   - 특징 벡터 분포 분석
   - 클래스 균형도

2. **시각적 특성**
   - 소나 이미지 품질 비교
   - 노이즈 레벨 분석
   - 해상도 및 선명도

#### 6.2 모델 성능 비교
1. **Cross-domain 성능**
   - 실데이터 훈련 → 모의데이터 테스트
   - 모의데이터 훈련 → 실데이터 테스트
   - 혼합 데이터 훈련 성능

2. **일반화 능력**
   - Domain Adaptation 기법 적용
   - Transfer Learning 효과 분석

#### 6.3 도메인 갭 분석
1. **차이점 식별**
   - 특징 공간에서의 분포 차이
   - 도메인별 편향 (Domain Bias) 분석

2. **개선 방안**
   - 데이터 증강 전략 수정
   - 도메인 불변 특징 추출

## 구현 순서

### Phase 1: 기본 분류 모델 (1-2시간)
1. 특징 데이터 로드 및 전처리
2. 베이스라인 모델 구현 (SVM, Random Forest)
3. 기본 성능 평가

### Phase 2: 고급 모델 및 최적화 (2-3시간)
1. CNN 기반 모델 구현
2. 하이퍼파라미터 튜닝
3. 앙상블 모델 구현

### Phase 3: 실데이터/모의데이터 분석 (1-2시간)
1. 데이터셋별 성능 비교
2. Cross-domain 성능 분석
3. 도메인 갭 분석 및 개선방안

### Phase 4: 최종 파이프라인 통합 (1시간)
1. 최적 모델 선택
2. 전체 파이프라인 통합
3. 최종 성능 검증

## 예상 결과물

### 코드 및 모델
- `src/classification/`: 분류 모델 구현
- `models/`: 훈련된 모델 파일
- `src/evaluation/`: 평가 도구

### 분석 보고서
- `CLASSIFICATION_MODEL_REPORT.md`: 모델 성능 분석
- `REAL_VS_SYNTHETIC_ANALYSIS.md`: 실데이터/모의데이터 비교
- `FINAL_PIPELINE_REPORT.md`: 전체 파이프라인 최종 보고서

### 시각화
- 모델 성능 차트 (ROC, Precision-Recall)
- 특징 중요도 시각화
- 실데이터/모의데이터 분포 비교
- 오분류 케이스 분석

## 성공 기준

### 정량적 목표
- **정확도**: > 90%
- **정밀도**: > 85%
- **재현율**: > 85%
- **F1-Score**: > 85%
- **추론 속도**: < 100ms per sample

### 정성적 목표
- 실데이터에서 robust한 성능
- 모의데이터와의 일관된 성능
- 해석가능한 모델 제공
- 실시간 처리 가능한 효율성

## 리스크 및 대응방안

### 주요 리스크
1. **데이터 부족**: 25개 실제 기뢰 샘플의 한계
2. **도메인 갭**: 실데이터와 모의데이터 간 큰 차이
3. **오버피팅**: 작은 데이터셋에서의 과적합

### 대응방안
1. **데이터 증강 강화**: 더 다양한 증강 기법 적용
2. **Transfer Learning**: 사전 훈련된 모델 활용
3. **Regularization**: 강력한 정규화 기법 적용
4. **Cross-validation**: 철저한 검증 전략

---

**이 로드맵을 통해 Step 5 완성 및 실데이터/모의데이터 분석을 체계적으로 수행하여 완전한 기뢰 탐지 시스템을 구축할 예정입니다.**